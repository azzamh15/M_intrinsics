<html> 
<head> 
<title> </title>
<style> 
px {font-family: "Lucida Console", Monaco, monospace}
p { font-size:100%; line-height:1.1em; }
body {xfont-style: sans-serif}
body {
color:#333; font-family:Verdana, Arial, Helvetica, sans-serif; font-size:1em; line-height:1.3em; }
a:visited { color:#666; }
h1,h2,h3,h4,h5,h6 { color:#333; font-family:georgia, verdana, sans-serif; }
h1 { font-size:150%; page-break-before:auto;background-color: #aaaaff}
h2 { font-size:143%;color:teal; }
h3 { font-size:134%;color:blue; }
h4 { font-size:120%;color:gray; }
img { max-width: 55em}
p{ padding: 0;margin:0; }
p{ padding-right:1.4em; }
p{ padding-bottom:1em; }
p{ padding-top:1em; }
p{ whitespace: pre-wrap; }
h5,h6 { font-size:100% }
a.nav,a:link.nav, a:visited.nav { background-color:#FFF; color:#000; }
XXtable { border:double #000; border-collapse:collapse; }
XXtable { border-collapse:collapse; }
XXtd { border:thin solid #888; }
XXtd { border:none; }
li { margin-bottom:0.5em; }
blockquote { display:block; font-size:100%; line-height:1.1em; margin:0 0 1.5em; padding:0 2.5em; }
pre { background-color:#DDD; font-size:100%; overflow:auto; padding:1em; }
a,li span { color:#000; }
a:hover, a.nav:hover, a:hover math { background-color:#000; color:#FFF; }
#Container { margin:0 10px; text-align:center; background-color: #BBB}
#Content { border-top:none; margin:auto; padding:0.3em; text-align:left; width:100%; max-width:55em; background:#FFF}
span.webName { font-size:.5em; }
textarea#content { font-size: 1em; line-height: 1.125; }
h1#pageName { line-height:1em; margin:0.2em 0 0.2em 0; padding:0; }
.property { color:#666; font-size:100%; }
a.existingWikiWord[title]{ //border: 1px dashed #BBB; }
.byline { color:#666; font-size:1.0em; font-style:italic; margin-bottom:1em; padding-top:1px; } 
</style> 
</head>
<BODY bgcolor=#F0F0F0 text=#000000 link=#0000ff vlink=#C000C0 alink=#ff0000><A NAME=top></A>
<!--
<h5><a href="index.html">[UP]</a></h5>
-->
<button type="button" onclick="javascript:history.back()">Back</button>
<div id="Container">
<div id="Content">
<CENTER>
<H1><HR><I>Manual Reference Pages &nbsp;-&nbsp;</I><NOBR>random_init (3fortran)</NOBR><HR></H1>
</CENTER>
<BLOCKQUOTE>
<B>RANDOM_INIT</B>(3) - [MATHEMATICS:RANDOM] control multi-image pseudorandom
number generator initialization.
</BLOCKQUOTE>
<A name=0>

     <H3>SYNTAX</H3>

</A>
<BLOCKQUOTE>
<P>
call random_init (repeatable, image_distinct)
<P>
<PRE>
         subroutine random_init(repeatable, image_distinct)
         logical,intent(in) :: repeatable
         logical,intent(in) :: image_distinct
<P>
</PRE>
</BLOCKQUOTE>
<BLOCKQUOTE>
</BLOCKQUOTE>
<A name=7>

     <H3>DESCRIPTION</H3>

</A>
<BLOCKQUOTE>
<P>
Pseudorandom generators produce a deterministic sequence of numbers that
pass statistical tests that show they appear sufficiently random to be
treated as such. So they are numbers that are generated by a repeatable
computation that appear random if you do know what algorithm is being
used.
<P>
To get different sets of random numbers you give them a different
starting point called a "seed"; which is often an array of whole
numbers.
<P>
External values (often time-related) are frequently used to
automatically generate different seed values so you can get different
sequences of random values without manually generating a seed each time
you want a different set of values.
<P>
The standard Fortran procedures do not specify a specific generator
algorithm. If you require a generator that produces the same values or a
specific quality independent of the compiler or platform being used you
will want to use your own generator or review the specific generators
used by your compiler. There are many packages available for such
situations.
<P>
But the standard procedures available are sufficient for many use cases.
They consist of <B>RANDOM_NUMBER</B>(3F), <B>RANDOM_SEED</B>(3F), and <B>RANDOM_INIT</B>(3F).
<P>
<B>RANDOM_NUMBER</B>(3F) calls a generator and returns a psuedorandom scalar or
array. This simple-to-use function does not directly define how to seed
or initialize the generator, however. So if you do not call one of the
other two initializer procedures it is implementation dependent as to
whether the initial seed is always the same or changes with each program
start, or whether all images in a parallel program start with the same
seed or unique seeds for each image, for instance.
<P>
So you need to either set the seed with <B>RANDOM_SEED</B>(3) yourself and
optionally the behavior when running in parallel with coarrays with
**random_init(3f) if you do not want to just depend on your particular
compiler behavior.
<P>
<B>RANDOM_INIT</B>(3F) Initializes the state of the pseudorandom number
generator procedure <B>RANDOM_NUMBER</B>(3F). <B>RANDOM_INIT</B>(3f) is equivalent to
invoking <B>RANDOM_SEED</B>(3F) with no parameters but considers parallel
images and otherwise processor-dependent behaviors as well.
<P>
Not every compiler vendor gives a unique seed for <B>random_seed</B>(), for
example.
<P>
The initial behavior of the pseudorandom number generator
<B>random_number</B>() procedure is processor-dependent if not initialized.
Even if initialized with <B>RANDOM_SEED</B>() if a specific seed array is not
specified behavior is still processor-dependent for multiple image codes
unless specific modes are selected with <B>RANDOM_INIT</B>().
<P>
There are four combinations of REPEATABLE and IMAGE_DISTINCT. The
behavior is as follows:
<P>
Case (i) : REPEATABLE=.true.,IMAGE_DISTINCT=.true.
<P>
PUT different on every invoking image. In each execution of the program
with the same execution environment, if the invoking image index value
in the initial team is the same, the value for PUT shall be the same.
<P>
PROGRAM main <B>REAL,DIMENSION</B>(1000) :: y CALL RANDOM_INIT
(REPEATABLE=.TRUE., IMAGE_DISTINCT=.TRUE.) CALL RANDOM_NUMBER (y) . . .
</BLOCKQUOTE>
<A name=2>

     <H3>END</H3>

</A>
<BLOCKQUOTE>
<P>
After executing the above code, the array y contains a different
sequence of pseudorandom numbers on each image that executes the code.
If the program is executed multiple times, for an image that has the
same image index in the initial team, the value of y is the same each
time the program is run.
<P>
Consider the following:
<P>
CALL <B>RANDOM_INIT</B>(.TRUE., .TRUE.)
<P>
The sequence of random numbers is repeatable. If the program is compiled
with <B>-fcoarray</B>=lib and multiple images are instantiated, then each image
accesses a repeatable distinct sequence of random numbers. Technically,
the Standard states that a distinct seed is used in each image (with the
tacit assumption that the sequences are distinct, but this is not
guaranteed). Also, the repeatability is guaranteed for the currently
executing image. Rerunning the executable does not require the same
distinct seeds, but I have chose to use the same seeds.
<P>
Case (ii) : REPEATABLE=.true.,IMAGE_DISTINCT=.false.
<P>
PUT is the same on every invoking image. In each execution of the
program with the same execution environment, the value for PUT shall be
the same.
<P>
Case (iii) : REPEATABLE=.false., IMAGE_DISTINCT=.true.
<P>
PUT is different on every invoking image. Different values for PUT shall
be used for subsequent invocations, and for each execution of the
program.
<P>
Case (iv) : REPEATABLE=.false.,IMAGE_DISTINCT=.false.
<P>
PUT that is the same on every invoking image. Different values for PUT
shall be used for subsequent invocations, and for each execution of the
program.
<P>
the array y contains the same sequence of pseudorandom numbers on each
image that executes the code. If the program is executed multiple times,
the value of y is different each time the program is run.
<P>
Consider another example:
<P>
PROGRAM main <B>REAL,DIMENSION</B>(1000) :: y CALL RANDOM_INIT
(REPEATABLE=.FALSE., IMAGE_DISTINCT=.FALSE.) CALL RANDOM_NUMBER (y) . .
\. END
<P>
The pseudorandom number generator used by RANDOM_NUMBER maintains a seed
on each image that is updated during the execution of RANDOM_NUMBER and
that can be retrieved or changed by RANDOM_INIT or RANDOM_SEED .
Computation of the seed from the argument PUT is performed in a
processor-dependent manner. The value assigned to GET need not be the
same as the value of PUT in an immediately preceding reference to
RANDOM_SEED. For example, following execution of the statements
<P>
In each of these cases, a different processor-dependent value for PUT
shall result in a different sequence of pseudorandom numbers.
</BLOCKQUOTE>
<A name=3>

     <H3>ARGUMENTS</H3>

</A>
<BLOCKQUOTE>
<P>
<TABLE cellpadding=3>
<TR valign=top><TD width=3%>
o
</TD><TD>
**repeatable : If .true., the seed is set to a processor-dependent
value that is the same each time <B>RANDOM_INIT</B>(3F) is called from the
same program execution (or the same image???).
<P>
The sequence of random numbers is different for repeated execution
of the program.
<P>
If it is .false., the seed is set to a processor-dependent value.
<P>
: when .true. init the seed used by RANDOM_NUMBER differently on
every invoking image.
<P>
If it is .true., the seed is set to a processor-dependent value that
is the same each time random_init is called from the same image.
</TD></TR>
<TR valign=top><TD width=3%>
o
</TD><TD>
IMAGE_DISTINCT
</TD></TR>
<TR></TR></TABLE><!-- .nf -->
<PRE>
    image_distinct : If .true., the seed is set to a processor-dependent
    value that is distinct from the seed set by a call to random_init in
    another image.
<P>
    If it is .false., the seed is set to a value that does depend which
    image called random_init.
<P>
    IMAGE_DISTINCT is clearly meant for a program that uses co-arrays
    where upon execution multiple images are instantiated. If a program
    does not use co-arrays or only a single image is instantiated, then
    IMAGE_DISTINCT is irrelevant.
<P>
</PRE>
</BLOCKQUOTE>
<A name=4>

     <H3>EXAMPLES</H3>

</A>
<BLOCKQUOTE>
<P>
Sample program:
<P>
<PRE>
    program demo_random_init
       ! random_number(3f) on this invoking image will generate a sequence
       ! that differs form other images that invoke a similar statement, as
       ! well as being different on subsequent program execution.
       call random_init (repeatable=.false., image_distinct=.true.)
<P>
    end program demo_random_init
    Example
<P>
    program test_random_seed
    implicit none
    real x(3), y(3)
       call random_init   (repeatable=.true., image_distinct=.true.)
       call random_number (x)
       call random_init   (repeatable=.true., image_distinct=.true.)
       call random_number (y)
       ! x and y are the same sequence
       if (any(x /= y)) stop "x(:) and y(:) not all equal"
    end program test_random_seed
<P>
</PRE>
Results:
</BLOCKQUOTE>
<A name=5>

     <H3>STANDARD</H3>

</A>
<BLOCKQUOTE>
<P>
Fortran 2018 and later
</BLOCKQUOTE>
<A name=6>

     <H3>SEE ALSO</H3>

</A>
<BLOCKQUOTE>
<P>
*_random_seed**(3), *_random_init**(3)
<P>
fortran-lang intrinsic descriptions (license: MIT) @urbanjost
</BLOCKQUOTE>
<P><HR>
<TABLE width=100%><TR> <TD width=33%><I>Nemo Release 3.1</I></TD> <TD width=33% align=center>random_init (3fortran)</TD> <TD align=right width=33%><I>September 17, 2022</I></TD> </TR></TABLE><FONT SIZE=-1>Generated by <A HREF="http://www.squarebox.co.uk/download/manServer.shtml">manServer 1.08</A> from 4456a070-0e1f-433e-9f18-b6293ebbe79b using man macros.</FONT>
<br><br><center><img src="images/random_init.3fortran.gif"></center>
</div>
</div>
</body>
</HTML>
