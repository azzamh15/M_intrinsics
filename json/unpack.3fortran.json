{"blocks":[{"t":"Header","c":[3,["",[],[]],[{"t":"Strong","c":[{"t":"Str","c":"Name"}]}]]},{"t":"Para","c":[{"t":"Strong","c":[{"t":"Str","c":"unpack"}]},{"t":"Str","c":"(3)"},{"t":"Space"},{"t":"Str","c":"-"},{"t":"Space"},{"t":"Str","c":"[ARRAY:CONSTRUCTION]"},{"t":"Space"},{"t":"Str","c":"Scatter"},{"t":"Space"},{"t":"Str","c":"the"},{"t":"Space"},{"t":"Str","c":"elements"},{"t":"Space"},{"t":"Str","c":"of"},{"t":"Space"},{"t":"Str","c":"a"},{"t":"Space"},{"t":"Str","c":"vector"},{"t":"SoftBreak"},{"t":"Str","c":"into"},{"t":"Space"},{"t":"Str","c":"an"},{"t":"Space"},{"t":"Str","c":"array"},{"t":"Space"},{"t":"Str","c":"using"},{"t":"Space"},{"t":"Str","c":"a"},{"t":"Space"},{"t":"Str","c":"mask"}]},{"t":"Header","c":[3,["",[],[]],[{"t":"Strong","c":[{"t":"Str","c":"Synopsis"}]}]]},{"t":"CodeBlock","c":[["",["fortran"],[]],"    result = unpack(vector, mask, field)\n"]},{"t":"CodeBlock","c":[["",["fortran"],[]],"     type(TYPE(kind=KIND)) unpack(vector, mask, field)\n\n      type(TYPE(kind=KIND)),intent(in) :: vector(:)\n      logical,intent(in)               :: mask(..)\n      type(TYPE(kind=KIND)),intent(in) :: field(..)\n"]},{"t":"Header","c":[3,["",[],[]],[{"t":"Strong","c":[{"t":"Str","c":"Characteristics"}]}]]},{"t":"BulletList","c":[[{"t":"Plain","c":[{"t":"Strong","c":[{"t":"Str","c":"vector"}]},{"t":"Space"},{"t":"Str","c":"is"},{"t":"Space"},{"t":"Str","c":"a"},{"t":"Space"},{"t":"Str","c":"rank-one"},{"t":"Space"},{"t":"Str","c":"array"},{"t":"Space"},{"t":"Str","c":"of"},{"t":"Space"},{"t":"Str","c":"any"},{"t":"Space"},{"t":"Str","c":"type"}]}],[{"t":"Plain","c":[{"t":"Strong","c":[{"t":"Str","c":"mask"}]},{"t":"Space"},{"t":"Str","c":"is"},{"t":"Space"},{"t":"Str","c":"a"},{"t":"Space"},{"t":"Str","c":"logical"},{"t":"Space"},{"t":"Str","c":"array"}]}],[{"t":"Plain","c":[{"t":"Strong","c":[{"t":"Str","c":"field"}]},{"t":"Space"},{"t":"Str","c":"is"},{"t":"Space"},{"t":"Str","c":"the"},{"t":"Space"},{"t":"Str","c":"same"},{"t":"Space"},{"t":"Str","c":"type"},{"t":"Space"},{"t":"Str","c":"and"},{"t":"Space"},{"t":"Str","c":"type"},{"t":"Space"},{"t":"Str","c":"parameters"},{"t":"Space"},{"t":"Str","c":"as"},{"t":"Space"},{"t":"Str","c":"VECTOR"},{"t":"Space"},{"t":"Str","c":"conformable"},{"t":"Space"},{"t":"Str","c":"with"},{"t":"Space"},{"t":"Strong","c":[{"t":"Str","c":"mask"}]},{"t":"Str","c":"."}]}],[{"t":"Plain","c":[{"t":"Str","c":"The"},{"t":"Space"},{"t":"Str","c":"result"},{"t":"Space"},{"t":"Str","c":"is"},{"t":"Space"},{"t":"Str","c":"an"},{"t":"Space"},{"t":"Str","c":"array"},{"t":"Space"},{"t":"Str","c":"of"},{"t":"Space"},{"t":"Str","c":"the"},{"t":"Space"},{"t":"Str","c":"same"},{"t":"Space"},{"t":"Str","c":"type"},{"t":"Space"},{"t":"Str","c":"and"},{"t":"Space"},{"t":"Str","c":"type"},{"t":"Space"},{"t":"Str","c":"parameters"},{"t":"Space"},{"t":"Str","c":"as"},{"t":"Space"},{"t":"Strong","c":[{"t":"Str","c":"vector"}]},{"t":"SoftBreak"},{"t":"Str","c":"and"},{"t":"Space"},{"t":"Str","c":"the"},{"t":"Space"},{"t":"Str","c":"same"},{"t":"Space"},{"t":"Str","c":"shape"},{"t":"Space"},{"t":"Str","c":"as"},{"t":"Space"},{"t":"Strong","c":[{"t":"Str","c":"mask"}]},{"t":"Str","c":"."}]}]]},{"t":"Header","c":[3,["",[],[]],[{"t":"Strong","c":[{"t":"Str","c":"Description"}]}]]},{"t":"Para","c":[{"t":"Strong","c":[{"t":"Str","c":"unpack"}]},{"t":"Str","c":"(3)"},{"t":"Space"},{"t":"Str","c":"scatters"},{"t":"Space"},{"t":"Str","c":"the"},{"t":"Space"},{"t":"Str","c":"elements"},{"t":"Space"},{"t":"Str","c":"of"},{"t":"Space"},{"t":"Strong","c":[{"t":"Str","c":"vector"}]},{"t":"Space"},{"t":"Str","c":"into"},{"t":"Space"},{"t":"Str","c":"a"},{"t":"Space"},{"t":"Str","c":"copy"},{"t":"Space"},{"t":"Str","c":"of"},{"t":"Space"},{"t":"Str","c":"an"},{"t":"SoftBreak"},{"t":"Str","c":"array"},{"t":"Space"},{"t":"Strong","c":[{"t":"Str","c":"field"}]},{"t":"Space"},{"t":"Str","c":"of"},{"t":"Space"},{"t":"Str","c":"any"},{"t":"Space"},{"t":"Str","c":"rank"},{"t":"Space"},{"t":"Str","c":"using"},{"t":"Space"},{"t":"Emph","c":[{"t":"Str","c":".true."}]},{"t":"Space"},{"t":"Str","c":"values"},{"t":"Space"},{"t":"Str","c":"from"},{"t":"Space"},{"t":"Strong","c":[{"t":"Str","c":"mask"}]},{"t":"Space"},{"t":"Str","c":"in"},{"t":"Space"},{"t":"Str","c":"array"},{"t":"SoftBreak"},{"t":"Str","c":"element"},{"t":"Space"},{"t":"Str","c":"order"},{"t":"Space"},{"t":"Str","c":"to"},{"t":"Space"},{"t":"Str","c":"specify"},{"t":"Space"},{"t":"Str","c":"placement"},{"t":"Space"},{"t":"Str","c":"of"},{"t":"Space"},{"t":"Str","c":"the"},{"t":"Space"},{"t":"Strong","c":[{"t":"Str","c":"vector"}]},{"t":"Space"},{"t":"Str","c":"values."}]},{"t":"Para","c":[{"t":"Str","c":"So"},{"t":"Space"},{"t":"Str","c":"a"},{"t":"Space"},{"t":"Str","c":"copy"},{"t":"Space"},{"t":"Str","c":"of"},{"t":"Space"},{"t":"Strong","c":[{"t":"Str","c":"field"}]},{"t":"Space"},{"t":"Str","c":"is"},{"t":"Space"},{"t":"Str","c":"generated"},{"t":"Space"},{"t":"Str","c":"with"},{"t":"Space"},{"t":"Str","c":"select"},{"t":"Space"},{"t":"Str","c":"elements"},{"t":"Space"},{"t":"Str","c":"replaced"},{"t":"Space"},{"t":"Str","c":"with"},{"t":"SoftBreak"},{"t":"Str","c":"values"},{"t":"Space"},{"t":"Str","c":"from"},{"t":"Space"},{"t":"Strong","c":[{"t":"Str","c":"vector"}]},{"t":"Str","c":"."},{"t":"Space"},{"t":"Str","c":"This"},{"t":"Space"},{"t":"Str","c":"allows"},{"t":"Space"},{"t":"Str","c":"for"},{"t":"Space"},{"t":"Str","c":"complex"},{"t":"Space"},{"t":"Str","c":"replacement"},{"t":"Space"},{"t":"Str","c":"patterns"},{"t":"SoftBreak"},{"t":"Str","c":"that"},{"t":"Space"},{"t":"Str","c":"would"},{"t":"Space"},{"t":"Str","c":"be"},{"t":"Space"},{"t":"Str","c":"difficult"},{"t":"Space"},{"t":"Str","c":"when"},{"t":"Space"},{"t":"Str","c":"using"},{"t":"Space"},{"t":"Str","c":"array"},{"t":"Space"},{"t":"Str","c":"syntax"},{"t":"Space"},{"t":"Str","c":"or"},{"t":"Space"},{"t":"Str","c":"multiple"},{"t":"Space"},{"t":"Str","c":"assignment"},{"t":"SoftBreak"},{"t":"Str","c":"statements,"},{"t":"Space"},{"t":"Str","c":"particularly"},{"t":"Space"},{"t":"Str","c":"when"},{"t":"Space"},{"t":"Str","c":"the"},{"t":"Space"},{"t":"Str","c":"replacements"},{"t":"Space"},{"t":"Str","c":"are"},{"t":"Space"},{"t":"Str","c":"conditional."}]},{"t":"Header","c":[3,["",[],[]],[{"t":"Strong","c":[{"t":"Str","c":"Options"}]}]]},{"t":"BulletList","c":[[{"t":"Para","c":[{"t":"Strong","c":[{"t":"Str","c":"vector"}]},{"t":"SoftBreak"},{"t":"Str","c":":"},{"t":"Space"},{"t":"Str","c":"New"},{"t":"Space"},{"t":"Str","c":"values"},{"t":"Space"},{"t":"Str","c":"to"},{"t":"Space"},{"t":"Str","c":"place"},{"t":"Space"},{"t":"Str","c":"into"},{"t":"Space"},{"t":"Str","c":"specified"},{"t":"Space"},{"t":"Str","c":"locations"},{"t":"Space"},{"t":"Str","c":"in"},{"t":"Space"},{"t":"Strong","c":[{"t":"Str","c":"field"}]},{"t":"Str","c":"."},{"t":"SoftBreak"},{"t":"Str","c":"It"},{"t":"Space"},{"t":"Str","c":"shall"},{"t":"Space"},{"t":"Str","c":"have"},{"t":"Space"},{"t":"Str","c":"at"},{"t":"Space"},{"t":"Str","c":"least"},{"t":"Space"},{"t":"Str","c":"as"},{"t":"Space"},{"t":"Str","c":"many"},{"t":"Space"},{"t":"Str","c":"elements"},{"t":"Space"},{"t":"Str","c":"as"},{"t":"Space"},{"t":"Strong","c":[{"t":"Str","c":"mask"}]},{"t":"Space"},{"t":"Str","c":"has"},{"t":"Space"},{"t":"Emph","c":[{"t":"Str","c":".true."}]},{"t":"SoftBreak"},{"t":"Str","c":"values."}]}],[{"t":"Para","c":[{"t":"Strong","c":[{"t":"Str","c":"mask"}]},{"t":"SoftBreak"},{"t":"Str","c":":"},{"t":"Space"},{"t":"Str","c":"Shall"},{"t":"Space"},{"t":"Str","c":"be"},{"t":"Space"},{"t":"Str","c":"an"},{"t":"Space"},{"t":"Str","c":"array"},{"t":"Space"},{"t":"Str","c":"that"},{"t":"Space"},{"t":"Str","c":"specifies"},{"t":"Space"},{"t":"Str","c":"which"},{"t":"Space"},{"t":"Str","c":"values"},{"t":"SoftBreak"},{"t":"Str","c":"in"},{"t":"Space"},{"t":"Strong","c":[{"t":"Str","c":"field"}]},{"t":"Space"},{"t":"Str","c":"are"},{"t":"Space"},{"t":"Str","c":"to"},{"t":"Space"},{"t":"Str","c":"be"},{"t":"Space"},{"t":"Str","c":"replaced"},{"t":"Space"},{"t":"Str","c":"with"},{"t":"Space"},{"t":"Str","c":"values"},{"t":"Space"},{"t":"Str","c":"from"},{"t":"Space"},{"t":"Strong","c":[{"t":"Str","c":"vector"}]},{"t":"Str","c":"."}]}],[{"t":"Para","c":[{"t":"Strong","c":[{"t":"Str","c":"field"}]},{"t":"SoftBreak"},{"t":"Str","c":":"},{"t":"Space"},{"t":"Str","c":"The"},{"t":"Space"},{"t":"Str","c":"input"},{"t":"Space"},{"t":"Str","c":"array"},{"t":"Space"},{"t":"Str","c":"to"},{"t":"Space"},{"t":"Str","c":"be"},{"t":"Space"},{"t":"Str","c":"altered."}]}]]},{"t":"Header","c":[3,["",[],[]],[{"t":"Strong","c":[{"t":"Str","c":"Result"}]}]]},{"t":"Para","c":[{"t":"Str","c":"The"},{"t":"Space"},{"t":"Str","c":"element"},{"t":"Space"},{"t":"Str","c":"of"},{"t":"Space"},{"t":"Str","c":"the"},{"t":"Space"},{"t":"Str","c":"result"},{"t":"Space"},{"t":"Str","c":"that"},{"t":"Space"},{"t":"Str","c":"corresponds"},{"t":"Space"},{"t":"Str","c":"to"},{"t":"Space"},{"t":"Str","c":"the"},{"t":"Space"},{"t":"Str","c":"ith"},{"t":"Space"},{"t":"Str","c":"true"},{"t":"Space"},{"t":"Str","c":"element"},{"t":"SoftBreak"},{"t":"Str","c":"of"},{"t":"Space"},{"t":"Strong","c":[{"t":"Str","c":"mask"}]},{"t":"Str","c":","},{"t":"Space"},{"t":"Str","c":"in"},{"t":"Space"},{"t":"Str","c":"array"},{"t":"Space"},{"t":"Str","c":"element"},{"t":"Space"},{"t":"Str","c":"order,"},{"t":"Space"},{"t":"Str","c":"has"},{"t":"Space"},{"t":"Str","c":"the"},{"t":"Space"},{"t":"Str","c":"value"},{"t":"Space"},{"t":"Strong","c":[{"t":"Str","c":"vector(i)"}]},{"t":"Space"},{"t":"Str","c":"for"},{"t":"Space"},{"t":"Str","c":"i"},{"t":"Space"},{"t":"Str","c":"="},{"t":"SoftBreak"},{"t":"Str","c":"1,"},{"t":"Space"},{"t":"Str","c":"2,"},{"t":"Space"},{"t":"Str","c":"."},{"t":"Space"},{"t":"Str","c":"."},{"t":"Space"},{"t":"Str","c":".,"},{"t":"Space"},{"t":"Str","c":"t,"},{"t":"Space"},{"t":"Str","c":"where"},{"t":"Space"},{"t":"Str","c":"t"},{"t":"Space"},{"t":"Str","c":"is"},{"t":"Space"},{"t":"Str","c":"the"},{"t":"Space"},{"t":"Str","c":"number"},{"t":"Space"},{"t":"Str","c":"of"},{"t":"Space"},{"t":"Str","c":"true"},{"t":"Space"},{"t":"Str","c":"values"},{"t":"Space"},{"t":"Str","c":"in"},{"t":"Space"},{"t":"Strong","c":[{"t":"Str","c":"mask"}]},{"t":"Str","c":"."},{"t":"Space"},{"t":"Str","c":"Each"},{"t":"SoftBreak"},{"t":"Str","c":"other"},{"t":"Space"},{"t":"Str","c":"element"},{"t":"Space"},{"t":"Str","c":"has"},{"t":"Space"},{"t":"Str","c":"a"},{"t":"Space"},{"t":"Str","c":"value"},{"t":"Space"},{"t":"Str","c":"equal"},{"t":"Space"},{"t":"Str","c":"to"},{"t":"Space"},{"t":"Str","c":"*"},{"t":"Emph","c":[{"t":"Str","c":"field"}]},{"t":"Space"},{"t":"Str","c":"if"},{"t":"Space"},{"t":"Str","c":"*"},{"t":"Emph","c":[{"t":"Str","c":"field"}]},{"t":"Space"},{"t":"Str","c":"is"},{"t":"Space"},{"t":"Str","c":"scalar"},{"t":"Space"},{"t":"Str","c":"or"},{"t":"Space"},{"t":"Str","c":"to"},{"t":"Space"},{"t":"Str","c":"the"},{"t":"SoftBreak"},{"t":"Str","c":"corresponding"},{"t":"Space"},{"t":"Str","c":"element"},{"t":"Space"},{"t":"Str","c":"of"},{"t":"Space"},{"t":"Str","c":"*"},{"t":"Emph","c":[{"t":"Str","c":"field"}]},{"t":"Space"},{"t":"Str","c":"if"},{"t":"Space"},{"t":"Str","c":"it"},{"t":"Space"},{"t":"Str","c":"is"},{"t":"Space"},{"t":"Str","c":"an"},{"t":"Space"},{"t":"Str","c":"array."}]},{"t":"Para","c":[{"t":"Str","c":"The"},{"t":"Space"},{"t":"Str","c":"resulting"},{"t":"Space"},{"t":"Str","c":"array"},{"t":"Space"},{"t":"Str","c":"corresponds"},{"t":"Space"},{"t":"Str","c":"to"},{"t":"Space"},{"t":"Strong","c":[{"t":"Str","c":"field"}]},{"t":"Space"},{"t":"Str","c":"with"},{"t":"Space"},{"t":"Emph","c":[{"t":"Str","c":".true."}]},{"t":"Space"},{"t":"Str","c":"elements"},{"t":"SoftBreak"},{"t":"Str","c":"of"},{"t":"Space"},{"t":"Strong","c":[{"t":"Str","c":"mask"}]},{"t":"Space"},{"t":"Str","c":"replaced"},{"t":"Space"},{"t":"Str","c":"by"},{"t":"Space"},{"t":"Str","c":"values"},{"t":"Space"},{"t":"Str","c":"from"},{"t":"Space"},{"t":"Strong","c":[{"t":"Str","c":"vector"}]},{"t":"Space"},{"t":"Str","c":"in"},{"t":"Space"},{"t":"Str","c":"array"},{"t":"Space"},{"t":"Str","c":"element"},{"t":"Space"},{"t":"Str","c":"order."}]},{"t":"Header","c":[3,["",[],[]],[{"t":"Strong","c":[{"t":"Str","c":"Examples"}]}]]},{"t":"Para","c":[{"t":"Str","c":"Particular"},{"t":"Space"},{"t":"Str","c":"values"},{"t":"Space"},{"t":"Str","c":"may"},{"t":"Space"},{"t":"Str","c":"be"},{"t":"Space"},{"t":"Str","c":"\"scattered\""},{"t":"Space"},{"t":"Str","c":"to"},{"t":"Space"},{"t":"Str","c":"particular"},{"t":"Space"},{"t":"Str","c":"positions"},{"t":"Space"},{"t":"Str","c":"in"},{"t":"Space"},{"t":"Str","c":"an"},{"t":"Space"},{"t":"Str","c":"array"},{"t":"Space"},{"t":"Str","c":"by"},{"t":"Space"},{"t":"Str","c":"using"}]},{"t":"CodeBlock","c":[["",["text"],[]],"                       1 0 0\n    If M is the array  0 1 0\n                       0 0 1\n\n    V is the array [1, 2, 3],\n                               . T .\n    and Q is the logical mask  T . .\n                               . . T\n    where \"T\" represents true and \".\" represents false, then the result of\n\n    UNPACK (V, MASK = Q, FIELD = M) has the value\n\n      1 2 0\n      1 1 0\n      0 0 3\n\n    and the result of UNPACK (V, MASK = Q, FIELD = 0) has the value\n\n      0 2 0\n      1 0 0\n      0 0 3\n"]},{"t":"Para","c":[{"t":"Str","c":"Sample"},{"t":"Space"},{"t":"Str","c":"program:"}]},{"t":"CodeBlock","c":[["",["fortran"],[]],"program demo_unpack\nimplicit none\nlogical,parameter :: T=.true., F=.false.\n\ninteger :: vector(2)  = [1,1]\n\n! mask and field must conform\ninteger,parameter :: r=2, c=2\nlogical :: mask(r,c)  = reshape([ T,F,F,T ],[2,2])\ninteger :: field(r,c) = 0, unity(2,2)\n\n   ! basic usage\n   unity = unpack( vector, mask, field )\n   call print_matrix_int('unity=', unity)\n\n   ! if FIELD is a scalar it is used to fill all the elements\n   ! not assigned to by the vector and mask.\n   call print_matrix_int('scalar field',         &\n   & unpack(                                     &\n   & vector=[ 1, 2, 3, 4 ],                      &\n   & mask=reshape([ T,F,T,F,F,F,T,F,T ], [3,3]), &\n   & field=0) )\n\ncontains\n\nsubroutine print_matrix_int(title,arr)\n! convenience routine:\n! just prints small integer arrays in row-column format\nimplicit none\ncharacter(len=*),intent(in)  :: title\ninteger,intent(in)           :: arr(:,:)\ninteger                      :: i\ncharacter(len=:),allocatable :: biggest\n\n   write(*,*)trim(title)\n   ! make buffer to write integer into\n   biggest='           '\n   ! find how many characters to use for integers\n   write(biggest,'(i0)')ceiling(log10(max(1.0,real(maxval(abs(arr))))))+2\n   ! use this format to write a row\n   biggest='(\"  [\",*(i'//trim(biggest)//':,\",\"))'\n   ! print one row of array at a time\n   do i=1,size(arr,dim=1)\n      write(*,fmt=biggest,advance='no')arr(i,:)\n      write(*,'(\" ]\")')\n   enddo\nend subroutine print_matrix_int\n\nend program demo_unpack\n"]},{"t":"Para","c":[{"t":"Str","c":"Results:"}]},{"t":"CodeBlock","c":[["",["text"],[]],"   > unity=\n   >  [ 1, 0 ]\n   >  [ 0, 1 ]\n   > scalar field\n   >  [  1,  0,  3 ]\n   >  [  0,  0,  0 ]\n   >  [  2,  0,  4 ]\n"]},{"t":"Header","c":[3,["",[],[]],[{"t":"Strong","c":[{"t":"Str","c":"Standard"}]}]]},{"t":"Para","c":[{"t":"Str","c":"Fortran"},{"t":"Space"},{"t":"Str","c":"95"}]},{"t":"Header","c":[3,["",[],[]],[{"t":"Strong","c":[{"t":"Str","c":"See"},{"t":"Space"},{"t":"Str","c":"Also"}]}]]},{"t":"Para","c":[{"t":"Link","c":[["",[],[]],[{"t":"Strong","c":[{"t":"Str","c":"merge"}]},{"t":"Str","c":"(3)"}],["#merge",""]]},{"t":"Str","c":","},{"t":"SoftBreak"},{"t":"Link","c":[["",[],[]],[{"t":"Strong","c":[{"t":"Str","c":"pack"}]},{"t":"Str","c":"(3)"}],["#pack",""]]},{"t":"Str","c":","},{"t":"SoftBreak"},{"t":"Link","c":[["",[],[]],[{"t":"Strong","c":[{"t":"Str","c":"spread"}]},{"t":"Str","c":"(3)"}],["#spread",""]]}]},{"t":"Para","c":[{"t":"Emph","c":[{"t":"Str","c":"fortran-lang"},{"t":"Space"},{"t":"Str","c":"intrinsic"},{"t":"Space"},{"t":"Str","c":"descriptions"},{"t":"Space"},{"t":"Str","c":"(license:"},{"t":"Space"},{"t":"Str","c":"MIT)"},{"t":"Space"},{"t":"Str","c":"@urbanjost"}]}]}],"pandoc-api-version":[1,17,5,4],"meta":{}}
